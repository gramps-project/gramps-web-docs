<!DOCTYPE html><html lang="en" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Open Source Genealogy">
      
      
      
        <link rel="canonical" href="https://www.grampsweb.org/install_setup/oidc/">
      
      
        <link rel="prev" href="../configuration/">
      
      
        <link rel="next" href="../chat/">
      
      
      <link rel="icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>OIDC authentication - Gramps Web</title>
      
    
    

      <link rel="stylesheet" href="../../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
<style>
  .banner {
    height: 24px;
    position: sticky;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1;
    text-align: center;
    display: none;  /* set to flex to show banner */
    align-items: center;
    justify-content: center;
    background-color: #66BB6A;
    color: #fff;
    font-size: 13px;
    font-weight: 500;
    font-family: Inter;
}

.banner a:link, .banner a:visited, .banner a:hover, .banner a:active {
    color: #fff;
    text-decoration: none;
}

.banner a:hover {
    font-weight: 600;
}

  .md-header {
      top: 0px;   /* set to 24px when banner is visible */
  }

</style>

    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="brown" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#oidc-authentication" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
<div class="banner">
    <span></span>
</div>

      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Gramps Web" class="md-header__button md-logo" aria-label="Gramps Web" data-md-component="logo">
      
  <img src="../../logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Gramps Web
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              OIDC authentication
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/gramps-project/gramps-web" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    

    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../features/" class="md-tabs__link">
          
  
  Features

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../setup/" class="md-tabs__link">
          
  
  Install/Setup

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../administration/admin/" class="md-tabs__link">
          
  
  Administration

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../user-guide/" class="md-tabs__link">
          
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../development/dev/" class="md-tabs__link">
          
  
  Developers

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../contribute/contribute/" class="md-tabs__link">
        
  
    
  
  Contribute

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../help/help/" class="md-tabs__link">
        
  
    
  
  Get Help

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Gramps Web" class="md-nav__button md-logo" aria-label="Gramps Web" data-md-component="logo">
      
  <img src="../../logo.svg" alt="logo">

    </a>
    Gramps Web
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/gramps-project/gramps-web" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2">
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Features
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Features
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Install/Setup
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Install/Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Try out locally
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3">
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Installation and Deployment
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Installation and Deployment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploy with Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lets_encrypt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker with Let's Encrypt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../digital_ocean/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DigitalOcean
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" checked>
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Server Administration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Server Administration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../users/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User system
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Server configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    OIDC authentication
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    OIDC authentication
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#built-in-providers" class="md-nav__link">
    <span class="md-ellipsis">
      Built-in Providers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-oidc-providers" class="md-nav__link">
    <span class="md-ellipsis">
      Custom OIDC Providers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#required-redirect-uris" class="md-nav__link">
    <span class="md-ellipsis">
      Required Redirect URIs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#role-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Role Mapping
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Role Mapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration_1" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#role-mapping-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      Role Mapping Behavior
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#oidc-logout" class="md-nav__link">
    <span class="md-ellipsis">
      OIDC Logout
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OIDC Logout">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backchannel-logout" class="md-nav__link">
    <span class="md-ellipsis">
      Backchannel Logout
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Backchannel Logout">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration_2" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-configurations" class="md-nav__link">
    <span class="md-ellipsis">
      Example Configurations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example Configurations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-oidc-provider-keycloak" class="md-nav__link">
    <span class="md-ellipsis">
      Custom OIDC Provider (Keycloak)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#built-in-provider-google" class="md-nav__link">
    <span class="md-ellipsis">
      Built-in Provider (Google)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-providers" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Providers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authelia" class="md-nav__link">
    <span class="md-ellipsis">
      Authelia
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setting up AI chat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multi-tree/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multi-tree setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../frontend-config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Frontend customization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../update/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../postgres/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using PostgreSQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hosting media on S3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cpu-limited/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Limit CPU &amp; memory usage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../telemetry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Telemetry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../v2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gramps 5.2 upgrade guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../v3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gramps 6.0 upgrade guide
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4">
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Administration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Administration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../administration/admin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../administration/owner/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create owner account
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../administration/import/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Import data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../administration/export/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Export data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../administration/sync/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Synchronize with Gramps
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5">
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2">
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    First steps
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            First steps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/registration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Registration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/first-login/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    First login
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3">
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Edit data
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Edit data
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/media/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add media files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/tagging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tag people in photos
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/blog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Use the blog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Manage tasks
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4">
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DNA
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            DNA
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/dna/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/dna-matches/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DNA matches
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/chromosome-browser/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chromosome browser
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/y-dna/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Y-DNA
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/revisions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Revision history
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6">
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Advanced features
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            Advanced features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/gql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GQL filters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/chat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AI chat
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6">
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Developers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/dev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2">
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Backend
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Backend
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/backend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/backend/setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/backend/api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API specification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/backend/queries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Manual queries
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_3">
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Frontend
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Frontend
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/frontend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/frontend/setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/frontend/architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/frontend/translation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Translation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/contribute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribute
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../help/help/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Help
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#built-in-providers" class="md-nav__link">
    <span class="md-ellipsis">
      Built-in Providers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-oidc-providers" class="md-nav__link">
    <span class="md-ellipsis">
      Custom OIDC Providers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#required-redirect-uris" class="md-nav__link">
    <span class="md-ellipsis">
      Required Redirect URIs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#role-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Role Mapping
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Role Mapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration_1" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#role-mapping-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      Role Mapping Behavior
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#oidc-logout" class="md-nav__link">
    <span class="md-ellipsis">
      OIDC Logout
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OIDC Logout">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backchannel-logout" class="md-nav__link">
    <span class="md-ellipsis">
      Backchannel Logout
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Backchannel Logout">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration_2" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-configurations" class="md-nav__link">
    <span class="md-ellipsis">
      Example Configurations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example Configurations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-oidc-provider-keycloak" class="md-nav__link">
    <span class="md-ellipsis">
      Custom OIDC Provider (Keycloak)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#built-in-provider-google" class="md-nav__link">
    <span class="md-ellipsis">
      Built-in Provider (Google)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-providers" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Providers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authelia" class="md-nav__link">
    <span class="md-ellipsis">
      Authelia
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/gramps-project/gramps-web-docs/blob/main/docs/install_setup/oidc.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"></path></svg>
    </a>
  
  


<h1 id="oidc-authentication">OIDC Authentication<a class="headerlink" href="#oidc-authentication" title="Permanent link">¶</a></h1>
<p>Gramps Web supports OpenID Connect (OIDC) authentication, allowing users to log in using external identity providers. This includes both popular providers like Google, Microsoft, and GitHub, as well as custom OIDC providers like Keycloak, Authentik, and others.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">¶</a></h2>
<p>OIDC authentication allows you to:</p>
<ul>
<li>Use external identity providers for user authentication</li>
<li>Support multiple authentication providers simultaneously</li>
<li>Map OIDC groups/roles to Gramps Web user roles</li>
<li>Implement Single Sign-On (SSO) and Single Sign-Out</li>
<li>Optionally disable local username/password authentication</li>
</ul>
<h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">¶</a></h2>
<p>To enable OIDC authentication, you need to configure the appropriate settings in your Gramps Web configuration file or environment variables. See the <a href="../configuration/#settings-for-oidc-authentication">Server Configuration</a> page for a complete list of available OIDC settings.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>When using environment variables, remember to prefix each setting name with <code>GRAMPSWEB_</code> (e.g., <code>GRAMPSWEB_OIDC_ENABLED</code>). See <a href="../configuration/#configuration-file-vs-environment-variables">Configuration file vs. environment variables</a> for details.</p>
</div>
<h3 id="built-in-providers">Built-in Providers<a class="headerlink" href="#built-in-providers" title="Permanent link">¶</a></h3>
<p>Gramps Web has built-in support for popular identity providers. To use them, you only need to provide the client ID and client secret:</p>
<ul>
<li><strong>Google</strong>: <code>OIDC_GOOGLE_CLIENT_ID</code> and <code>OIDC_GOOGLE_CLIENT_SECRET</code></li>
<li><strong>Microsoft</strong>: <code>OIDC_MICROSOFT_CLIENT_ID</code> and <code>OIDC_MICROSOFT_CLIENT_SECRET</code></li>
<li><strong>GitHub</strong>: <code>OIDC_GITHUB_CLIENT_ID</code> and <code>OIDC_GITHUB_CLIENT_SECRET</code></li>
</ul>
<p>You can configure multiple providers simultaneously. The system will automatically detect which providers are available based on the configuration values.</p>
<h3 id="custom-oidc-providers">Custom OIDC Providers<a class="headerlink" href="#custom-oidc-providers" title="Permanent link">¶</a></h3>
<p>For custom OIDC providers (like Keycloak, Authentik, or any standard OIDC-compliant provider), use these settings:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>OIDC_ENABLED</code></td>
<td>Boolean, whether to enable OIDC authentication. Set to <code>True</code>.</td>
</tr>
<tr>
<td><code>OIDC_ISSUER</code></td>
<td>Your provider's issuer URL</td>
</tr>
<tr>
<td><code>OIDC_CLIENT_ID</code></td>
<td>Client ID for your OIDC provider</td>
</tr>
<tr>
<td><code>OIDC_CLIENT_SECRET</code></td>
<td>Client secret for your OIDC provider</td>
</tr>
<tr>
<td><code>OIDC_NAME</code></td>
<td>Custom display name (optional, defaults to "OIDC")</td>
</tr>
<tr>
<td><code>OIDC_SCOPES</code></td>
<td>OAuth scopes (optional, defaults to "openid email profile")</td>
</tr>
</tbody>
</table>
<h2 id="required-redirect-uris">Required Redirect URIs<a class="headerlink" href="#required-redirect-uris" title="Permanent link">¶</a></h2>
<p>When configuring your OIDC provider, you must register the following redirect URI:</p>
<p><strong>For OIDC providers that support wildcards: (e.g., Authentik)</strong></p>
<ul>
<li><code>https://your-gramps-backend.com/api/oidc/callback/*</code></li>
</ul>
<p>Where <code>*</code> is a regex wildcard. Depending on your provider's regex interpreter this could also be a <code>.*</code> or similar.
Ensure that regex is enabled if your provider requires it (e.g., Authentik).</p>
<p><strong>For OIDC providers that do not support wildcards: (e.g., Authelia)</strong></p>
<ul>
<li><code>https://your-gramps-backend.com/api/oidc/callback/?provider=custom</code></li>
</ul>
<h2 id="role-mapping">Role Mapping<a class="headerlink" href="#role-mapping" title="Permanent link">¶</a></h2>
<p>Gramps Web can automatically map OIDC groups or roles from your identity provider to Gramps Web user roles. This allows you to manage user permissions centrally in your identity provider.</p>
<h3 id="configuration_1">Configuration<a class="headerlink" href="#configuration_1" title="Permanent link">¶</a></h3>
<p>Use these settings to configure role mapping:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>OIDC_ROLE_CLAIM</code></td>
<td>The claim name in the OIDC token that contains the user's groups/roles. Defaults to "groups"</td>
</tr>
<tr>
<td><code>OIDC_GROUP_ADMIN</code></td>
<td>The group/role name from your OIDC provider that maps to the Gramps "Admin" role</td>
</tr>
<tr>
<td><code>OIDC_GROUP_OWNER</code></td>
<td>The group/role name from your OIDC provider that maps to the Gramps "Owner" role</td>
</tr>
<tr>
<td><code>OIDC_GROUP_EDITOR</code></td>
<td>The group/role name from your OIDC provider that maps to the Gramps "Editor" role</td>
</tr>
<tr>
<td><code>OIDC_GROUP_CONTRIBUTOR</code></td>
<td>The group/role name from your OIDC provider that maps to the Gramps "Contributor" role</td>
</tr>
<tr>
<td><code>OIDC_GROUP_MEMBER</code></td>
<td>The group/role name from your OIDC provider that maps to the Gramps "Member" role</td>
</tr>
<tr>
<td><code>OIDC_GROUP_GUEST</code></td>
<td>The group/role name from your OIDC provider that maps to the Gramps "Guest" role</td>
</tr>
</tbody>
</table>
<h3 id="role-mapping-behavior">Role Mapping Behavior<a class="headerlink" href="#role-mapping-behavior" title="Permanent link">¶</a></h3>
<ul>
<li>If no role mapping is configured (no <code>OIDC_GROUP_*</code> variables set), existing user roles are preserved</li>
<li>Users are assigned the highest role they are entitled to based on their group membership</li>
<li>Role mapping is case-sensitive by default (depends on your OIDC provider)</li>
</ul>
<h2 id="oidc-logout">OIDC Logout<a class="headerlink" href="#oidc-logout" title="Permanent link">¶</a></h2>
<p>Gramps Web supports Single Sign-Out (SSO logout) for OIDC providers. When a user logs out from Gramps Web after authenticating via OIDC, they will be automatically redirected to the identity provider's logout page if the provider supports the <code>end_session_endpoint</code>.</p>
<h3 id="backchannel-logout">Backchannel Logout<a class="headerlink" href="#backchannel-logout" title="Permanent link">¶</a></h3>
<p>Gramps Web implements the OpenID Connect Back-Channel Logout specification. This allows identity providers to notify Gramps Web when a user logs out from another application or the identity provider itself.</p>
<h4 id="configuration_2">Configuration<a class="headerlink" href="#configuration_2" title="Permanent link">¶</a></h4>
<p>To configure backchannel logout with your identity provider:</p>
<ol>
<li>
<p><strong>Register the backchannel logout endpoint</strong> in your identity provider's client configuration:
   </p><div class="highlight"><pre><span></span><code>https://your-gramps-backend.com/api/oidc/backchannel-logout/
</code></pre></div><p></p>
</li>
<li>
<p><strong>Configure your provider</strong> to send logout notifications. The exact steps depend on your provider:</p>
</li>
</ol>
<p><strong>Keycloak:</strong></p>
<ul>
<li>In your client configuration, navigate to "Settings"</li>
<li>Set "Backchannel Logout URL" to <code>https://your-gramps-backend.com/api/oidc/backchannel-logout/</code></li>
<li>Enable "Backchannel Logout Session Required" if you want session-based logout</li>
</ul>
<p><strong>Authentik:</strong></p>
<ul>
<li>In your provider configuration, add the backchannel logout URL</li>
<li>Ensure the provider is configured to send logout tokens</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Token Expiration</p>
<p>Due to the stateless nature of JWT tokens, backchannel logout currently logs the logout event but cannot immediately revoke already-issued JWT tokens. Tokens will remain valid until they expire (default: 15 minutes for access tokens).</p>
<p>For enhanced security, consider:</p>
<ul>
<li>Reducing JWT token expiration time (<code>JWT_ACCESS_TOKEN_EXPIRES</code>)</li>
<li>Educating users to manually log out from Gramps Web when logging out from your identity provider</li>
</ul>
</div>
<div class="admonition tip">
<p class="admonition-title">How It Works</p>
<p>When a user logs out from your identity provider or another application:</p>
<ol>
<li>The provider sends a <code>logout_token</code> JWT to Gramps Web's backchannel logout endpoint</li>
<li>Gramps Web validates the token and logs the logout event</li>
<li>The logout token's JTI is added to a blocklist to prevent replay attacks</li>
<li>Any new API requests with the user's JWT will be denied once tokens expire</li>
</ol>
</div>
<h2 id="example-configurations">Example Configurations<a class="headerlink" href="#example-configurations" title="Permanent link">¶</a></h2>
<h3 id="custom-oidc-provider-keycloak">Custom OIDC Provider (Keycloak)<a class="headerlink" href="#custom-oidc-provider-keycloak" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">TREE</span><span class="o">=</span><span class="s2">"My Family Tree"</span>
<span class="n">BASE_URL</span><span class="o">=</span><span class="s2">"https://mytree.example.com"</span>
<span class="n">SECRET_KEY</span><span class="o">=</span><span class="s2">"..."</span>  <span class="c1"># your secret key</span>
<span class="n">USER_DB_URI</span><span class="o">=</span><span class="s2">"sqlite:////path/to/users.sqlite"</span>

<span class="c1"># Custom OIDC Configuration</span>
<span class="n">OIDC_ENABLED</span><span class="o">=</span><span class="kc">True</span>
<span class="n">OIDC_ISSUER</span><span class="o">=</span><span class="s2">"https://auth.example.com/realms/myrealm"</span>
<span class="n">OIDC_CLIENT_ID</span><span class="o">=</span><span class="s2">"gramps-web"</span>
<span class="n">OIDC_CLIENT_SECRET</span><span class="o">=</span><span class="s2">"your-client-secret"</span>
<span class="n">OIDC_NAME</span><span class="o">=</span><span class="s2">"Family SSO"</span>
<span class="n">OIDC_SCOPES</span><span class="o">=</span><span class="s2">"openid email profile"</span>
<span class="n">OIDC_AUTO_REDIRECT</span><span class="o">=</span><span class="kc">True</span>  <span class="c1"># Optional: automatically redirect to SSO login</span>
<span class="n">OIDC_DISABLE_LOCAL_AUTH</span><span class="o">=</span><span class="kc">True</span>  <span class="c1"># Optional: disable username/password login</span>

<span class="c1"># Optional: Role mapping from OIDC groups to Gramps roles</span>
<span class="n">OIDC_ROLE_CLAIM</span><span class="o">=</span><span class="s2">"groups"</span>  <span class="c1"># or "roles" depending on your provider</span>
<span class="n">OIDC_GROUP_ADMIN</span><span class="o">=</span><span class="s2">"gramps-admins"</span>
<span class="n">OIDC_GROUP_EDITOR</span><span class="o">=</span><span class="s2">"gramps-editors"</span>
<span class="n">OIDC_GROUP_MEMBER</span><span class="o">=</span><span class="s2">"gramps-members"</span>

<span class="n">EMAIL_HOST</span><span class="o">=</span><span class="s2">"mail.example.com"</span>
<span class="n">EMAIL_PORT</span><span class="o">=</span><span class="mi">465</span>
<span class="n">EMAIL_USE_TLS</span><span class="o">=</span><span class="kc">True</span>
<span class="n">EMAIL_HOST_USER</span><span class="o">=</span><span class="s2">"gramps@example.com"</span>
<span class="n">EMAIL_HOST_PASSWORD</span><span class="o">=</span><span class="s2">"..."</span> <span class="c1"># your SMTP password</span>
<span class="n">DEFAULT_FROM_EMAIL</span><span class="o">=</span><span class="s2">"gramps@example.com"</span>
</code></pre></div>
<h3 id="built-in-provider-google">Built-in Provider (Google)<a class="headerlink" href="#built-in-provider-google" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">TREE</span><span class="o">=</span><span class="s2">"My Family Tree"</span>
<span class="n">BASE_URL</span><span class="o">=</span><span class="s2">"https://mytree.example.com"</span>
<span class="n">SECRET_KEY</span><span class="o">=</span><span class="s2">"..."</span>  <span class="c1"># your secret key</span>
<span class="n">USER_DB_URI</span><span class="o">=</span><span class="s2">"sqlite:////path/to/users.sqlite"</span>

<span class="c1"># Google OAuth</span>
<span class="n">OIDC_GOOGLE_CLIENT_ID</span><span class="o">=</span><span class="s2">"your-google-client-id"</span>
<span class="n">OIDC_GOOGLE_CLIENT_SECRET</span><span class="o">=</span><span class="s2">"your-google-client-secret"</span>
</code></pre></div>
<h3 id="multiple-providers">Multiple Providers<a class="headerlink" href="#multiple-providers" title="Permanent link">¶</a></h3>
<p>You can enable multiple OIDC providers simultaneously:</p>
<div class="highlight"><pre><span></span><code><span class="n">TREE</span><span class="o">=</span><span class="s2">"My Family Tree"</span>
<span class="n">BASE_URL</span><span class="o">=</span><span class="s2">"https://mytree.example.com"</span>
<span class="n">SECRET_KEY</span><span class="o">=</span><span class="s2">"..."</span>  <span class="c1"># your secret key</span>
<span class="n">USER_DB_URI</span><span class="o">=</span><span class="s2">"sqlite:////path/to/users.sqlite"</span>

<span class="c1"># Custom provider</span>
<span class="n">OIDC_ENABLED</span><span class="o">=</span><span class="kc">True</span>
<span class="n">OIDC_ISSUER</span><span class="o">=</span><span class="s2">"https://auth.example.com/realms/myrealm"</span>
<span class="n">OIDC_CLIENT_ID</span><span class="o">=</span><span class="s2">"gramps-web"</span>
<span class="n">OIDC_CLIENT_SECRET</span><span class="o">=</span><span class="s2">"your-client-secret"</span>
<span class="n">OIDC_NAME</span><span class="o">=</span><span class="s2">"Company SSO"</span>

<span class="c1"># Google OAuth</span>
<span class="n">OIDC_GOOGLE_CLIENT_ID</span><span class="o">=</span><span class="s2">"your-google-client-id"</span>
<span class="n">OIDC_GOOGLE_CLIENT_SECRET</span><span class="o">=</span><span class="s2">"your-google-client-secret"</span>

<span class="c1"># GitHub OAuth</span>
<span class="n">OIDC_GITHUB_CLIENT_ID</span><span class="o">=</span><span class="s2">"your-github-client-id"</span>
<span class="n">OIDC_GITHUB_CLIENT_SECRET</span><span class="o">=</span><span class="s2">"your-github-client-secret"</span>
</code></pre></div>
<h3 id="authelia">Authelia<a class="headerlink" href="#authelia" title="Permanent link">¶</a></h3>
<p>A community-made OIDC setup guide for Gramps Web is available on the <a href="https://www.authelia.com/integration/openid-connect/clients/gramps/">official Authelia documentation website</a>.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer">
        
          
          <a href="../configuration/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Server configuration">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Server configuration
              </div>
            </div>
          </a>
        
        
          
          <a href="../chat/" class="md-footer__link md-footer__link--next" aria-label="Next: Setting up AI chat">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Setting up AI chat
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.instant", "navigation.expand", "navigation.footer", "content.action.edit", "content.code.copy"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>