# 用户系统

Gramps Web 并不打算向公众开放互联网访问，而仅限经过身份验证的用户。用户帐户可以通过命令行或网页界面由网站所有者创建，或通过自我注册并随后由网站所有者批准。

## 用户角色

当前定义了以下用户角色。

角色 | 角色 ID | 权限
-----|---------|------------
访客 | 0 | 查看非私人对象
成员 | 1 | 访客 + 查看私人对象
贡献者* | 2 | 成员 + 添加对象
编辑者 | 3 | 贡献者 + 编辑和删除对象
所有者 | 4 | 编辑者 + 管理用户
管理员 | 5 | 所有者 + 在多树设置中编辑其他树

\* 请注意，“贡献者”角色目前仅部分支持；例如，家庭对象无法添加，因为它们意味着对家庭成员的基础 Gramps 人物对象的修改。建议在可能的情况下使用其他角色。

## 配置谁可以使用 AI 聊天

如果您已经[配置了 AI 聊天](chat.md)，您将在此处看到一个选项，以选择哪些用户组被允许使用聊天功能。

## 管理用户

有两种方法可以管理用户：

- 使用拥有者权限通过网页界面
- 在服务器上的命令行

需要首先访问网页应用程序的所有者帐户可以在访问具有空用户数据库的 Gramps Web 时自动启动的入职向导中添加。

### 在命令行上管理用户

使用 [Docker Compose](deployment.md) 时，基本命令是

```bash
docker compose run grampsweb python3 -m gramps_webapi user COMMAND [ARGS]
```

`COMMAND` 可以是 `add` 或 `delete`。使用 `--help` 查看 `[ARGS]` 的语法和可能的配置选项。

### 批准自我注册的用户

当用户自我注册时，他们不会立即获得访问权限。系统会向树的所有者发送一封关于新用户注册的电子邮件，同时用户会收到一封请求确认其电子邮件地址的电子邮件。成功确认其电子邮件地址后，他们的角色将从 `unconfirmed` 更改为 `disabled`。在用户帐户处于这两种角色中的任何一种时，用户无法登录。树的所有者必须审核用户的请求并为用户分配适当的角色，然后他们才能登录。
