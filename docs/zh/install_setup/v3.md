# Gramps 6.0 升级指南

Gramps 6.0 于 2025 年 3 月 19 日发布。由于它使用了与 Gramps 5.2 不同的家庭树数据库架构，因此在将 Gramps Web 升级到 Gramps 6.0 时需要额外的步骤。本页面描述了必要的步骤。

!!! info
    最后更新：2025 年 5 月 4 日


## 步骤概述


这是升级所需步骤的概述。
它还显示了哪些步骤由 Gramps Web 服务器的管理员、家庭树的所有者执行，以及是否仅对 [同步插件](../administration/sync.md) 的用户需要。

服务器管理员 | 树的所有者  | 操作
----|----|----
&nbsp; | ✓ | 备份您的家庭树
&nbsp; | ✓ <sup>1</sup> |  [将 Gramps Web 与 Gramps Desktop 同步](../administration/sync.md)
✓ |  | [更新 Gramps Web](update.md)
&nbsp; | ✓ | 更新树的数据库架构
&nbsp; | ✓ <sup>1</sup> | 更新 Gramps Desktop
&nbsp; | ✓ <sup>1</sup> | 安装更新后的同步插件
&nbsp; | ✓ | 备份您的家庭树
&nbsp; | ✓ <sup>1</sup> | [将 Gramps Web 与 Gramps Desktop 同步](../administration/sync.md)


<sup>1</sup> 仅在您将 Gramps Web 与 Gramps Desktop 同步时需要。


## 发布状态概述

下表概述了与 Gramps 6.0 一起使用的 Gramps Web 所需组件的发布情况。

组件 | 发布日期
---|---
Gramps 6.0.1 | 2025-04-18
Gramps Web API 3.0.0 | 2025-05-04
Gramps Web (前端) 25.5.0 | &ndash;
Gramps Web 同步插件 1.3.2 | 2025-04-30
SharedPostgreSQL 插件 0.1.12 | 2025-03-20


## 详细步骤

本节提供了上述某些单独步骤的更多详细信息。

### 备份您的家庭树

在 Gramps Web 中，转到“导出”页面并选择“Gramps XML（家庭树）”（默认选项）。点击“生成”，并等待 .gramps 文件的下载开始。

您还可以按照 [通常的方法](https://www.gramps-project.org/wiki/index.php/How_to_make_a_backup) 在 Gramps Desktop 中创建备份。

### 更新树的数据库架构

当您在升级后第一次访问 Gramps Web 时，您将看到一条消息的屏幕：

> 您尝试加载的家庭树的架构版本不受此版本的 Gramps Web 支持。因此，您无法在不升级其架构的情况下加载此家庭树。此操作无法撤销。

您现在可以点击“升级家庭树”按钮。它将显示进度条，完成时间不应超过一分钟。请不要担心，如果您不小心关闭了浏览器窗口，转换将在后台继续进行。

!!! warning
    如果您使用的是 *没有* 后台任务队列的非标准设置，数据库升级可能会失败，并且您的家庭树可能会损坏。您可以在更新 Gramps Web 之前，通过转到设置中的“系统信息”部分并确保其显示“任务队列：true”来检查是否正在使用后台任务队列。


### 更新 Gramps Desktop

请按照您操作系统的 Gramps Desktop 安装说明进行操作。

### 安装更新后的同步插件

您可以在 Gramps 6.0 中使用插件管理器安装 Gramps Web 同步插件。搜索 Gramps Web Sync，点击安装，然后重启 Gramps。
