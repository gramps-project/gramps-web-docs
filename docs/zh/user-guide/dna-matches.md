# 使用DNA匹配

DNA匹配是两个个体之间同意的DNA片段，通过标记的存在来识别，这些标记称为SNP（单核苷酸多态性，发音为“snips”）。

要获取这些数据，您需要访问上传到匹配数据库的DNA测试，以便查看DNA片段匹配数据（例如MyHeritage、Gedmatch、FamilytreeDNA）。Gramps Web并不执行匹配本身，因为它仅访问您上传的数据。

## 输入DNA匹配数据

要输入DNA匹配数据，您需要[编辑权限](../install_setup/users.md)，因为数据作为注释存储在Gramps数据库中。可以从主菜单访问的DNA视图提供了一种方便的方式以正确格式输入这些数据。

要输入新的匹配，请点击右下角的 + 按钮。在打开的对话框中，选择两个个体。请注意，“第一个人”和“第二个人”的处理方式不同：匹配作为从第一个人到第二个人的关联存储。只有第一个人可以在DNA匹配视图和染色体浏览器中被选择。通常，第一个人是您可以访问其DNA测试的人，第二个人是更远的亲属。

如果第二个人不在数据库中，您需要先使用用户界面右上角的“创建个人”按钮创建该人。一旦您创建了该人，您可以返回DNA匹配视图并选择新创建的人。

接下来，将原始数据粘贴到文本字段中。数据应为以逗号或制表符分隔的匹配表，通常包含染色体编号、匹配的起始和结束位置、匹配中的SNP数量以及以厘摩根（cM）为单位的匹配长度。您还可以将包含匹配数据的文件拖放到文本字段中。

这样的表的最小示例是：

```csv
Chromosome,Start Location,End Location,Centimorgans,SNPs
6,6358001,18115715,19.6,7424
7,150135758,154205894,10.9,2816
```

如果格式有效，文本字段下方将显示一个预览表。

最后，点击“保存”按钮将匹配存储在数据库中。

## 查看DNA匹配数据

DNA匹配视图有一个下拉菜单，允许选择数据库中与DNA匹配相关的每个人。一旦选择了一个人，DNA匹配数据将显示在下拉菜单下方的表格中。它显示与匹配相关的人的姓名、与下拉菜单中选定的人的关系（自动从Gramps数据库中确定）、共享DNA的总长度（以厘摩根cM为单位）、共享片段的数量以及这些片段中最大的长度。

当您点击单个匹配时，它会打开一个详细页面，显示所有片段以及匹配是在母系还是父系。这些信息可以手动输入（通过在原始数据中名为“Side”的列中提供`P`表示父系或`M`表示母系），也可以由Gramps根据最近的共同祖先自动确定。

## 编辑匹配

您可以通过点击匹配详细视图右下角的铅笔按钮来编辑匹配。这将打开一个与创建新匹配时类似的对话框，但数据会预先填充。请注意，您可以更改原始数据，但不能更改与匹配相关的个体—如果您想更改个体，您需要删除匹配并创建一个新的匹配。

## 在Gramps桌面版中处理匹配数据

DNA匹配数据作为注释存储在Gramps数据库中。该格式与
[DNA片段地图插件](https://gramps-project.org/wiki/index.php/Addon:DNASegmentMapGramplet)
兼容，适用于Gramps桌面版。其维基页面包含有关如何获取数据、如何解释数据以及如何在Gramps中输入数据的更多详细信息。

!!! info
    Gramps Web API v2.8.0引入了一些更改，以接受更广泛范围的原始DNA匹配数据，这在Gramps桌面版插件中尚不可用。Gramps桌面版插件将在未来更新，以支持相同的格式。
