# Телеметрия

Начиная с версии 3.2.0 Gramps Web API, Gramps Web по умолчанию отправляет полностью анонимизированные данные телеметрии каждые 24 часа на аналитическую конечную точку, контролируемую командой Gramps Web. Эта страница содержит информацию о собранных данных телеметрии, о том, как они используются, и о том, как отключить их, если это необходимо.

## Какие данные собираются?

Данные телеметрии представляют собой небольшой JSON-пейлоад следующего формата:

```json
{
  "server_uuid": "c04325bfa7ae4578bcf134ec8fc046a7",
  "tree_uuid": "abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890",
  "timestamp": 1701234567,
}
```

Как вы можете проверить сами [в исходном коде](https://github.com/gramps-project/gramps-web-api/blob/master/gramps_webapi/api/telemetry.py#L83-L87), идентификаторы сервера и дерева уникальны для сервера и дерева, но не содержат никакой личной идентифицируемой информации. `timestamp` — это текущее время в формате Unix timestamp.

## Почему данные собираются?

Отправка уникального идентификатора раз в день позволяет команде Gramps Web отслеживать, сколько уникальных серверов работает с Gramps Web и сколько уникальных деревьев используется.

Это важно для понимания влияния на внешние сервисы, которые используются Gramps Web, такие как карты тайлов.

## Как собираются данные?

Когда поступает запрос к вашему серверу Gramps Web API, он проверяет, были ли отправлены данные телеметрии за последние 24 часа (проверяя ключ в локальном кэше). Если нет, то вышеуказанный пейлоад отправляется на конечную точку, которая регистрирует данные.

Конечная точка логирования размещена на Google Cloud Run и напрямую развернута из [репозитория с открытым исходным кодом](https://github.com/DavidMStraub/cloud-run-telemetry), так что вы можете проверить, как обрабатываются данные.

## Что будет сделано с данными?

Прежде всего, никакие данные, кроме анонимизированного пейлоада, которые гипотетически могут быть собраны (такие как IP-адрес сервера), не будут использоваться командой Gramps Web.

Собранные анонимизированные идентификаторы и временные метки будут агрегированы для создания графиков, таких как:

- Количество активных установок Gramps Web в зависимости от времени
- Количество активных деревьев Gramps Web в зависимости от времени

Эти графики будут опубликованы на сайте документации Gramps Web.

## Как отключить телеметрию?

Поскольку статистические данные полезны для команды Gramps Web и мы убедились, что никакие личные данные не отправляются, **мы будем благодарны, если вы не отключите телеметрию!**

Тем не менее, Gramps Web предоставляет пользователям полный контроль, поэтому, конечно, вы можете выбрать отключение этой функции, если хотите.

Для этого просто установите параметр конфигурации `DISABLE_TELEMETRY` в значение `True` (например, установив переменную окружения `GRAMPSWEB_DISABLE_TELEMETRY` в значение `true` &ndash; смотрите [документацию по конфигурации](configuration.md) для получения подробностей).
