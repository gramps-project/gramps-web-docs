# Работа с ДНК-сопоставлениями

ДНК-сопоставления — это сегменты ДНК, которые совпадают между двумя людьми, определяемые наличием маркеров, так называемых SNP (аббревиатура от однонуклеотидных полиморфизмов, произносится как "снипс").

Чтобы получить эти данные, вам нужен доступ к ДНК-тесту, который загружен в базу данных сопоставлений, позволяющую просматривать данные о совпадениях сегментов ДНК (например, MyHeritage, Gedmatch, FamilytreeDNA). Gramps Web не выполняет сопоставление самостоятельно, так как у него есть доступ только к данным, которые вы загружаете.

## Ввод данных о ДНК-сопоставлениях

Чтобы ввести данные о ДНК-сопоставлениях, вам нужны [права на редактирование](../install_setup/users.md), так как данные хранятся в виде заметки в базе данных Gramps. Вид ДНК, доступный из главного меню, предоставляет удобный способ ввода этих данных в правильном формате.

Чтобы ввести новое сопоставление, нажмите кнопку + в правом нижнем углу. В открывшемся диалоговом окне выберите двух людей. Обратите внимание, что "Первый человек" и "Второй человек" обрабатываются по-разному: сопоставление сохраняется как ассоциация от первого ко второму человеку. Только первый человек будет доступен для просмотра ДНК-сопоставлений и браузера хромосом. Обычно первый человек — это тот, чьи данные ДНК у вас есть, а второй человек — более удаленный родственник.

Если второго человека нет в базе данных, вам нужно сначала создать его, используя кнопку "Создать человека" в правом верхнем углу пользовательского интерфейса. После того как вы создадите человека, вы можете вернуться к просмотру ДНК-сопоставлений и выбрать вновь созданного человека.

Далее вставьте сырые данные в текстовое поле. Данные должны быть в виде таблицы, разделенной запятыми или табуляцией, обычно содержащей номер хромосомы, начальную и конечную позиции сопоставления, количество SNP в сопоставлении и длину сопоставления в единицах сантиморганов (cM). Вы также можете перетащить файл с данными о сопоставлениях в текстовое поле.

Минимальный пример такой таблицы:

```csv
Хромосома,Начальная позиция,Конечная позиция,Сантиморганы,SNP
6,6358001,18115715,19.6,7424
7,150135758,154205894,10.9,2816
```

Если формат действителен, ниже текстового поля будет показан предварительный просмотр в виде таблицы.

Наконец, нажмите кнопку "Сохранить", чтобы сохранить сопоставление в базе данных.

## Просмотр данных о ДНК-сопоставлениях

Вид ДНК-сопоставлений имеет выпадающее меню, которое позволяет выбрать каждого человека в базе данных, у которого есть связанное ДНК-сопоставление. После выбора человека данные о ДНК-сопоставлениях отображаются в таблице под выпадающим меню. В ней показано имя человека, с которым связано сопоставление, отношение к выбранному в выпадающем меню человеку (автоматически определяется из базы данных Gramps), общая длина совместной ДНК в сантиморганах (cM), количество общих сегментов и длина самого большого из этих сегментов.

Когда вы нажимаете на отдельное сопоставление, открывается страница с деталями, показывающая все сегменты и то, является ли сопоставление по материнской или отцовской линии. Эта информация может быть введена вручную (предоставив `P` для отцовской или `M` для материнской в столбце с названием `Сторона` в сырых данных) или автоматически определена Gramps на основе самого недавнего общего предка.

## Редактирование сопоставления

Вы можете редактировать сопоставление, нажав на кнопку с карандашом в правом нижнем углу в представлении деталей сопоставления. Это откроет аналогичный диалог, как при создании нового сопоставления, но с предзаполненными данными. Обратите внимание, что вы можете изменить сырые данные, но не людей, связанных с сопоставлением — вам нужно удалить сопоставление и создать новое, если вы хотите изменить людей.

## Работа с данными о сопоставлениях в Gramps Desktop

Данные о ДНК-сопоставлениях хранятся в виде заметки в базе данных Gramps. Формат совместим с 
[Дополнением карты сегментов ДНК](https://gramps-project.org/wiki/index.php/Addon:DNASegmentMapGramplet)
доступным для Gramps Desktop. Его страница в вики содержит больше деталей о том, как получить данные, как их интерпретировать и как ввести данные в Gramps.

!!! info
    Gramps Web API v2.8.0 ввел некоторые изменения, чтобы принимать более широкий спектр сырых данных о ДНК-сопоставлениях, которые еще не доступны в дополнении Gramps Desktop. Дополнение Gramps Desktop будет обновлено в будущем, чтобы поддерживать те же форматы.
