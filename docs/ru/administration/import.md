## Подготовьте вашу базу данных Gramps

Если вы используете Gramps Desktop, есть два шага для подготовки вашей базы данных, чтобы убедиться, что все будет работать гладко в дальнейшем. Если вы мигрируете с другой программы генеалогии, вы можете пропустить этот шаг.

1. Проверьте и исправьте базу данных
    - По желанию: создайте резервную копию базы данных, экспортировав в Gramps XML
    - Запустите [инструмент проверки и исправления базы данных](https://gramps-project.org/wiki/index.php/Gramps_5.2_Wiki_Manual_-_Tools#Check_and_Repair_Database). Это исправляет некоторые внутренние несоответствия, которые могут привести к проблемам в Gramps Web.
2. Преобразуйте пути к медиафайлам в относительные
    - Используйте Менеджер медиафайлов Gramps, чтобы [преобразовать все пути к медиафайлам из абсолютных в относительные](https://gramps-project.org/wiki/index.php/Gramps_5.2_Wiki_Manual_-_Tools#Convert_paths_from_relative_to_absolute). Обратите внимание, что даже с относительными путями любые медиафайлы вне вашей директории медиафайлов Gramps не будут работать должным образом при синхронизации с Gramps Web.

## Импорт генеалогических данных

Чтобы импортировать существующее семейное дерево, используйте страницу "Импорт" и загрузите файл в любом из форматов файлов, поддерживаемых Gramps &ndash; смотрите [Импорт из другой программы генеалогии](https://www.gramps-project.org/wiki/index.php/Import_from_another_genealogy_program) в вики Gramps.

Если вы уже используете Gramps Desktop, настоятельно рекомендуется использовать формат Gramps XML (`.gramps`), чтобы гарантировать, что ваши онлайн и оффлайн деревья используют одни и те же идентификаторы и могут быть [синхронизированы](sync.md).

## Почему нет поддержки пакета Gramps XML?

Хотя Gramps XML (`.gramps`) является предпочтительным форматом для импорта данных, пакет Gramps XML (`.gpkg`) не поддерживается Gramps Web. Это связано с тем, что процедуры импорта и экспорта медиафайлов не подходят для использования на веб-сервере.

Чтобы импортировать медиафайлы, принадлежащие импортированному файлу `.gramps`, смотрите следующий раздел.

## Импорт медиафайлов

Если вы загрузили семейное дерево и необходимо загрузить соответствующие медиафайлы, вы можете использовать кнопку "импорт медиаархива" на странице "Импорт".

Ожидается ZIP-файл с отсутствующими медиафайлами внутри. Структура папок в ZIP-файле не обязательно должна совпадать со структурой папок внутри папки медиафайлов Gramps, так как файлы сопоставляются с медиаобъектами по их контрольной сумме.

Обратите внимание, что эта функция работает только для файлов, которые имеют правильную контрольную сумму в базе данных Gramps (что должно быть обеспечено запуском инструмента проверки и исправления на первом шаге).

При переходе на Gramps Web с другой программы генеалогии, включая медиафайлы, рекомендуется сначала импортировать все в Gramps Desktop, который имеет больше возможностей для связывания существующих медиафайлов с импортированным деревом.
