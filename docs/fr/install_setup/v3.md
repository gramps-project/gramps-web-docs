# Guide de mise à niveau de Gramps 6.0

Gramps 6.0 a été publié le 19 mars 2025. Comme il utilise un nouveau schéma de base de données d'arbre généalogique par rapport à Gramps 5.2, des étapes supplémentaires sont nécessaires lors de la mise à niveau de Gramps Web pour être utilisé avec Gramps 6.0. Cette page décrit les étapes nécessaires.

!!! info
    Dernière mise à jour : 4 mai 2025


## Aperçu des étapes


Voici un aperçu des étapes requises pour la mise à niveau. 
Il montre également quelles étapes sont exécutées par l'administrateur du serveur Gramps Web, le propriétaire de l'arbre généalogique, et si cela est nécessaire uniquement pour les utilisateurs de l'[addon de synchronisation](../administration/sync.md)

Administrateur du serveur | Propriétaire de l'arbre  | Action
----|----|----
&nbsp; | ✓ | Sauvegardez votre arbre généalogique
&nbsp; | ✓ <sup>1</sup> |  [Synchronisez Gramps Web avec Gramps Desktop](../administration/sync.md)
✓ |  | [Mettez à jour Gramps Web](update.md)
&nbsp; | ✓ | Mettez à jour le schéma de base de données de l'arbre
&nbsp; | ✓ <sup>1</sup> | Mettez à jour Gramps Desktop
&nbsp; | ✓ <sup>1</sup> | Installez l'addon de synchronisation mis à jour
&nbsp; | ✓ | Sauvegardez votre arbre généalogique
&nbsp; | ✓ <sup>1</sup> | [Synchronisez Gramps Web avec Gramps Desktop](../administration/sync.md)


<sup>1</sup> Nécessaire uniquement si vous synchronisez Gramps Web avec Gramps Desktop.


## Aperçu de l'état de la version

Le tableau suivant donne un aperçu de la date de publication des composants nécessaires pour Gramps Web avec Gramps 6.0.

Composant | Publié
---|---
Gramps 6.0.1 | 2025-04-18
Gramps Web API 3.0.0 | 2025-05-04
Gramps Web (Frontend) 25.5.0 | &ndash;
Gramps Web Sync Addon 1.3.2 | 2025-04-30
SharedPostgreSQL Addon 0.1.12 | 2025-03-20


## Étapes détaillées

Cette section fournit plus de détails sur certaines des étapes individuelles ci-dessus.

### Sauvegardez votre arbre généalogique

Dans Gramps Web, allez à la page "Exporter" et sélectionnez "Gramps XML (arbre généalogique)" (l'option par défaut). Cliquez sur "Générer" et attendez que le téléchargement du fichier .gramps commence.

Vous pouvez également créer une sauvegarde dans Gramps Desktop [de la manière habituelle](https://www.gramps-project.org/wiki/index.php/How_to_make_a_backup).

### Mettez à jour le schéma de base de données de l'arbre

Lorsque vous accédez à Gramps Web pour la première fois après l'avoir mis à niveau, un écran vous présentera le message : 

> L'arbre généalogique que vous essayez de charger est dans une version de schéma non supportée par cette version de Gramps Web. Par conséquent, vous ne pouvez pas charger cet arbre généalogique sans mettre à niveau son schéma. Cette action ne peut pas être annulée.

Vous pouvez maintenant cliquer sur le bouton "Mettre à niveau l'arbre généalogique". Cela affichera une barre de progression et ne devrait pas prendre plus d'une minute pour se terminer. Ne vous inquiétez pas, si vous fermez accidentellement votre fenêtre de navigateur, la conversion continuera en arrière-plan.

!!! warning
    Si vous utilisez une configuration non standard *sans* file d'attente de tâches en arrière-plan, la mise à niveau de la base de données pourrait échouer et votre arbre généalogique pourrait être corrompu. Vous pouvez vérifier (avant de mettre à jour Gramps Web) si vous utilisez une file d'attente de tâches en arrière-plan en allant dans la section "Informations système" dans les paramètres et en vous assurant qu'elle indique "file d'attente de tâches : true".


### Mettez à jour Gramps Desktop

Suivez les instructions d'installation de Gramps Desktop pour votre système d'exploitation.

### Installez l'addon de synchronisation mis à jour

Vous pouvez utiliser le Gestionnaire de plugins dans Gramps 6.0 pour installer l'addon de synchronisation Gramps Web. Recherchez Gramps Web Sync, cliquez sur installer, et redémarrez Gramps.
