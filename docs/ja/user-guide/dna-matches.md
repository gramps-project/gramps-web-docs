# DNAマッチの操作

DNAマッチは、2人の個体間で一致するDNAのセグメントであり、マーカー、いわゆるSNP（単一ヌクレオチド多型の略称、発音は「スニップ」）の存在によって特定されます。

このデータを取得するには、DNAセグメントマッチデータを表示できるマッチングデータベースにアップロードされたDNAテストへのアクセスが必要です（例：MyHeritage、Gedmatch、FamilytreeDNA）。Gramps Webはマッチングを自ら行うことはなく、アップロードしたデータへのアクセスのみを持っています。

## DNAマッチデータの入力

DNAマッチデータを入力するには、[編集権限](../install_setup/users.md)が必要です。データはGrampsデータベースのノートとして保存されます。メインメニューからアクセスできるDNAビューは、このデータを適切な形式で入力するための便利な方法を提供します。

新しいマッチを入力するには、右下の+ボタンをクリックします。開いたダイアログで、2人の個体を選択します。「最初の人」と「2番目の人」は異なる扱いを受けることに注意してください：マッチは最初の人から2番目の人への関連として保存されます。DNAマッチビューおよび染色体ブラウザでは、最初の人のみが選択可能です。通常、最初の人はあなたがアクセスできるDNAテストを持つ人であり、2番目の人はより遠い親戚です。

2番目の人がデータベースに存在しない場合は、ユーザーインターフェースの右上隅にある「人物を作成」ボタンを使用して最初に作成する必要があります。人物を作成したら、DNAマッチビューに戻り、新しく作成した人物を選択できます。

次に、生データをテキストフィールドに貼り付けます。データは、通常、染色体番号、マッチの開始位置と終了位置、マッチ内のSNPの数、およびセンチモルガン（cM）単位でのマッチの長さを含む、カンマまたはタブで区切られたマッチのテーブルである必要があります。また、マッチデータを含むファイルをテキストフィールドにドラッグアンドドロップすることもできます。

そのようなテーブルの最小限の例は次のとおりです：

```csv
Chromosome,Start Location,End Location,Centimorgans,SNPs
6,6358001,18115715,19.6,7424
7,150135758,154205894,10.9,2816
```

フォーマットが有効であれば、テキストフィールドの下にプレビューがテーブルとして表示されます。

最後に、「保存」ボタンをクリックして、マッチをデータベースに保存します。

## DNAマッチデータの表示

DNAマッチビューには、データベース内の関連するDNAマッチを持つ各人物を選択できるドロップダウンがあります。人物が選択されると、DNAマッチデータがドロップダウンの下にあるテーブルに表示されます。そこには、マッチが関連付けられている人物の名前、ドロップダウンで選択された人物との関係（Grampsデータベースから自動的に決定される）、共有DNAの総長さ（センチモルガンcM）、共有セグメントの数、およびこれらのセグメントの中で最も大きいものの長さが表示されます。

個々のマッチをクリックすると、すべてのセグメントとマッチが母系または父系のどちら側にあるかを示す詳細ページが開きます。この情報は、生データの「Side」という列に`P`（父系）または`M`（母系）を提供することによって手動で入力することも、Grampsが最も最近の共通祖先に基づいて自動的に決定することもできます。

## マッチの編集

マッチを編集するには、マッチ詳細ビューの右下にある鉛筆ボタンをクリックします。これにより、新しいマッチを作成する際と似たダイアログが開きますが、データは事前に入力されています。生データを変更することはできますが、マッチに関連付けられた個体を変更することはできません。個体を変更したい場合は、マッチを削除して新しいものを作成する必要があります。

## Gramps Desktopでのマッチデータの操作

DNAマッチデータは、Grampsデータベースのノートとして保存されます。このフォーマットは、Gramps Desktop用の
[DNAセグメントマップアドオン](https://gramps-project.org/wiki/index.php/Addon:DNASegmentMapGramplet)
と互換性があります。そのWikiページには、データの取得方法、解釈方法、およびGrampsへのデータの入力方法についての詳細が含まれています。

!!! info
    Gramps Web API v2.8.0は、より広範な生DNAマッチデータを受け入れるためのいくつかの変更を導入しましたが、これはまだGramps Desktopアドオンでは利用できません。Gramps Desktopアドオンは、将来的に同じフォーマットをサポートするように更新される予定です。
