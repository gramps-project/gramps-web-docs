## Grampsデータベースの準備

Gramps Desktopを使用している場合、次の手順でデータベースを準備し、すべてがスムーズに実行されることを確認します。別の系譜プログラムから移行する場合は、このステップをスキップできます。

1. データベースのチェックと修復
    - オプション: Gramps XMLにエクスポートしてデータベースのバックアップを作成
    - [データベースのチェックと修復ツール](https://gramps-project.org/wiki/index.php/Gramps_5.2_Wiki_Manual_-_Tools#Check_and_Repair_Database)を実行します。これにより、Gramps Webで問題を引き起こす可能性のある内部の不整合が修正されます。
2. メディアパスを相対パスに変換
    - Grampsメディアマネージャーを使用して、[すべてのメディアパスを絶対パスから相対パスに変換](https://gramps-project.org/wiki/index.php/Gramps_5.2_Wiki_Manual_-_Tools#Convert_paths_from_relative_to_absolute)します。相対パスを使用しても、Grampsメディアディレクトリの外にあるメディアファイルは、Gramps Webと同期するときに正しく動作しないことに注意してください。

## 系譜データのインポート

既存の家系図をインポートするには、「インポート」ページを使用し、Grampsがサポートする任意のファイル形式のファイルをアップロードします &ndash; Gramps Wikiの[別の系譜プログラムからのインポート](https://www.gramps-project.org/wiki/index.php/Import_from_another_genealogy_program)を参照してください。

すでにGramps Desktopを使用している場合、オンラインとオフラインのツリーが同じ識別子を使用し、[同期](sync.md)できるようにするために、Gramps XML（`.gramps`）形式を使用することを強くお勧めします。

## Gramps XMLパッケージのサポートがない理由

Gramps XML（`.gramps`）はデータをインポートするための推奨形式ですが、Gramps XML *パッケージ*（`.gpkg`）はGramps Webではサポートされていません。これは、メディアファイルのインポートおよびエクスポートルーチンがウェブサーバーでの使用に適していないためです。

インポートされた`.gramps`ファイルに属するメディアファイルをインポートするには、次のセクションを参照してください。

## メディアファイルのインポート

家系図をアップロードし、対応するメディアファイルをアップロードする必要がある場合は、「インポート」ページの「メディアアーカイブをインポート」ボタンを使用できます。

このボタンは、欠落しているメディアファイルが含まれたZIPファイルを期待します。ZIPファイル内のフォルダ構造は、Grampsメディアフォルダ内のフォルダ構造と同じである必要はありません。ファイルはそのチェックサムによってメディアオブジェクトにマッチングされます。

この機能は、Grampsデータベース内に正しいチェックサムを持つファイルにのみ機能することに注意してください（これは最初のステップでチェックと修復ツールを実行することで保証されるべきです）。

メディアファイルを含む別の系譜プログラムからGramps Webに移行する場合は、最初にすべてをGramps Desktopにインポートすることをお勧めします。これにより、インポートされたツリーに既存のメディアファイルを関連付けるためのオプションが増えます。
