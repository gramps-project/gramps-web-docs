# テレメトリー

Gramps Web API バージョン 3.2.0 以降、Gramps Web はデフォルトで完全に匿名化されたテレメトリーデータを 24 時間ごとに Gramps Web チームが管理する分析エンドポイントに送信します。このページには、収集されるテレメトリーデータ、データの使用方法、および希望する場合の無効化方法に関する情報が含まれています。

## どのようなデータが収集されますか？

テレメトリーデータは、以下の形式の小さな JSON ペイロードです：

```json
{
  "server_uuid": "c04325bfa7ae4578bcf134ec8fc046a7",
  "tree_uuid": "abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890",
  "timestamp": 1701234567,
}
```

[ソースコード](https://github.com/gramps-project/gramps-web-api/blob/master/gramps_webapi/api/telemetry.py#L83-L87) で確認できるように、サーバーおよびツリーの識別子はサーバーおよびツリーごとにユニークですが、個人を特定できる情報は含まれていません。`timestamp` は Unix タイムスタンプとしての現在の時間です。

## なぜデータが収集されるのですか？

ユニークな識別子を1日1回送信することで、Gramps Web チームは Gramps Web を実行しているユニークなサーバーの数と、使用されているユニークなツリーの数を追跡できます。

これは、Gramps Web が使用する外部サービス（地図タイルなど）への影響を理解するために重要です。

## データはどのように収集されますか？

Gramps Web API サーバーにリクエストが送信されると、最後の 24 時間にテレメトリーが送信されたかどうか（ローカルキャッシュ内のキーをチェックすることで）を確認します。送信されていない場合、上記のペイロードがデータをログするエンドポイントに送信されます。

ログエンドポイントは Google Cloud Run 上にホストされており、[オープンソースリポジトリ](https://github.com/DavidMStraub/cloud-run-telemetry) から直接デプロイされているため、データがどのように処理されるかを確認できます。

## データはどのように使用されますか？

まず第一に、Gramps Web チームによって使用されるのは、匿名化されたペイロード以外のデータ（サーバーの IP アドレスなど、仮に収集される可能性のあるデータ）はありません。

収集された匿名化された ID とタイムスタンプは、次のようなグラフを生成するために集計されます：

- 時間の関数としてのアクティブな Gramps Web インストールの数
- 時間の関数としてのアクティブな Gramps Web ツリーの数

これらのグラフは Gramps Web ドキュメントサイトに公開されます。

## テレメトリーを無効にするには？

統計データは Gramps Web チームにとって有用であり、個人を特定できるデータが送信されないことを確認しているため、**テレメトリーを無効にしないでいただけると幸いです！**

それでも、Gramps Web はユーザーに完全なコントロールを提供しているため、もちろん希望する場合はこの機能を無効にすることができます。

そのためには、単に `DISABLE_TELEMETRY` 設定オプションを `True` に設定してください（例：`GRAMPSWEB_DISABLE_TELEMETRY` 環境変数を `true` に設定することで &ndash; 詳細は [設定ドキュメント](configuration.md) を参照してください）。
